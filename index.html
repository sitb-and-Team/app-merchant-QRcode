<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/index.css">
    <script src="js/jquery-3.3.1.js"></script>
    <script src="js/rem.js"></script>
</head>
<body>
<p>商户代码：</p>
<div class="center">
    <input type='text' name='code[]' class='now' maxlength="1"/>
    <input type='text' name='code[]' class='now' maxlength="1"/>
    <input type='text' name='code[]' class='now' maxlength="1"/>
    <input type='text' name='code[]' class='now' maxlength="1"/>
    <input type='text' name='code[]' class='now' maxlength="1"/>
    <input type='text' name='code[]' class='now' maxlength="1"/>
    <input type='text' name='code[]' class='now' maxlength="1"/>
    <input type='text' name='code[]' class='now' maxlength="1"/>
    <input type='text' name='code[]' class='now' maxlength="1"/>
    <input type='text' name='code[]' class='now' maxlength="1"/>
    <input type='text' name='code[]' class='now' maxlength="1"/>
    <input type='text' name='code[]' class='now' maxlength="1"/>
    <input type='text' name='code[]' class='now' maxlength="1"/>
    <input type='text' name='code[]' class='now' maxlength="1"/>
    <input type='text' name='code[]' class='now' maxlength="1"/>
</div>
<button id="butt">获取收款码</button>
<img id="QRcode" style="display: none"/>
<script type="text/javascript">
    let dm = [];
    $('.now').on('keyup', function () {
        // 如果不为空
        if ($(this).val() != '') {
            if (dm.length >= 15) {
                return
            } else {
                dm[dm.length] = $(this).val();
                $(this).next('input').focus();
            }
            console.log(dm);
        }
    });
    $('.now').on('keydown', function (event) {
        let evt = event || window.event;
        if ($(this).val() == '' && evt.keyCode == 8) {
            // 如果为空且按下退回键
            dm.pop();
            $(this).prev('input').focus();
            console.log(dm);
        }
    });
    // $(function () {
    //     $('#butt').click(function () {
    //         window.location.href = 'login.html'
    //     })
    // }

    $('#butt').click(function () {
        var merchantCode = dm.toString().split(',').join("");
        $('#QRcode').attr({
            src: "http://192.168.88.15:8000/qrcode?merchantCode=" + merchantCode,
            style: {display: 'block'}
        });
    })
</script>
</body>
</html>
